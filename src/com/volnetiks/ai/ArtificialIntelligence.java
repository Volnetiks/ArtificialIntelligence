package com.volnetiks.ai;

import com.volnetiks.ai.action.DefinitionAction;
import com.volnetiks.ai.action.TranslateAction;
import com.volnetiks.ai.questions.QuestionsManager;
import com.volnetiks.ai.questions.ValueComparator;

import java.util.*;

/* Date: 11/01/2019 For Artificial Intelligence By Volnetiks */
public class ArtificialIntelligence {

    static List<String> questions;
    static HashMap<String, Class<?>> actions;

    public static void main(String[] args) {
        questions = new ArrayList<>();
        actions = new HashMap<>();
        initArray();
        System.out.println("Please, ask me something.");
        Scanner sc = new Scanner(System.in);
        String question = sc.nextLine();
        QuestionsManager questionsManager = new QuestionsManager(questions, actions);
        HashMap array;
        array = questionsManager.fetchQuestionsAndFindOne(question, questionsManager.getQuestions());
        TreeMap sortedMap = sortMapByValue(array);
        questionsManager.getActionToDo(sortedMap.firstKey().toString());
    }

    private static void initArray() {
        questions.add("Give me a definition");
        questions.add("Can you translate a text?");
        actions.put("Give me a definition", DefinitionAction.class);
        actions.put("Can you translate a text?", TranslateAction.class);
    }

    public static TreeMap<String, Integer> sortMapByValue(HashMap<String, Integer> map){
        Comparator<String> comparator = new ValueComparator(map);
        TreeMap<String, Integer> result = new TreeMap<                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   >(comparator);
        result.putAll(map);
        return result;
    }

}
